(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(66)},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a,r=n(21),i=n.n(r),o=n(0),l=n.n(o),s=n(11),c={rainbow:["#e84439","#eb642b","#f49b21","#109e68","#0089cc","#893f90","#c2135b","#f8c1b2","#f6bb9d","#fccc8e","#92cba9","#88bae5","#c189bb","#e4819b"],default:["#6c120a","#a21e25","#cd2b2a","#dc372d","#ec6250","#f6b0a0","#fbd7cb","#fce3dc"],sunflower:["#7d4712","#ba6b15","#df8000","#f7a838","#fac47e","#fedcab","#fee7c1","#feedd4"],marigold:["#7a2e05","#ac4622","#cb5730","#ee7644","#f4a57c","#facbad","#fcdbbf","#fde5d4"],rose:["#65093d","#8d0e56","#9f1459","#d12568","#e05c86","#f3a5b6","#f6b8c1","#f9cdd0"],lavendar:["#42184c","#632572","#732c85","#994d98","#af73ae","#cb98c4","#deb5d6","#ebcfe5"],bluebell:["#0c457b","#0071b1","#0089cc","#5da3d9","#77adde","#88bae5","#bcd4f0","#d3e0f4"],leaf:["#08492f","#005b3e","#00694a","#3b8c62","#74bf93","#a2d1b0","#b1d8bb","#c5e1cb"],orange:["#973915","#d85b31","#eb642b","#f18e5e","#f4a57c","#f6bb9d"]},u={color:c.default.concat(c.rainbow),legend:{left:"10%",top:10,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},tooltip:{show:!0,trigger:"item",showContent:!0,textStyle:{fontFamily:"Geomanist Regular,sans-serif"}},toolbox:{show:!0,showTitle:!1,feature:{saveAsImage:{title:"Save as PNG",pixelRatio:2}},right:20,tooltip:{show:!0,formatter:function(e){return"<div>"+e.title+"</div>"},textStyle:{fontFamily:"Geomanist Regular,sans-serif"}}},xAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1}},yAxis:{axisLabel:{fontFamily:"Geomanist Regular,sans-serif",fontSize:13},splitLine:{show:!1},nameLocation:"end",nameTextStyle:{padding:[0,50,0,0]}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0}},p=u,d=n(22),f=n(28),b=n(2),m=n.n(b),g=f.a.div(a||(a=Object(d.a)(["\n  color: red;\n  font-size: 11px;\n  position: relative;\n  padding: 5px 5px 5px 0px;\n  display: block;\n"]))),v=function(e){var t=Object(o.useState)(""),n=t[0],a=t[1],r=function(t){t?"maxSelectedOptions"===t.type&&a(e.selectErrorMessage):a("")};return l.a.createElement("div",null,l.a.Children.map(e.children,(function(e){return l.a.isValidElement(e)?l.a.cloneElement(e,{onError:r}):e})),n?l.a.createElement(g,{className:"data-selector--wrapper"},n):null)};v.propTypes={selectErrorMessage:m.a.string,children:m.a.node};var h=v,y=n(23),w=n(24),x=n(1),S=n(27),O={control:function(e){return Object.assign({},e,{borderColor:"#ddd",borderRadius:"none",boxShadow:"none",":hover":{borderColor:"#8f1b13"},":active":{borderColor:"#8f1b13"}})},option:function(e){return Object.assign({},e,{fontSize:"14px"})},singleValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValue:function(e){return Object.assign({},e,{fontSize:"14px"})},multiValueLabel:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{paddingRight:6})},multiValueRemove:function(e,t){return t.data.isCloseable?e:Object.assign({},e,{display:"none"})},input:function(e){return Object.assign({},e,{fontSize:"14px"})},indicatorsContainer:function(e){return Object.assign({},e,{pointerEvents:"none"})}},C=function(e){var t=e.label,n=e.onError,a=e.maxSelectedOptions,r=e.defaultValue,i=e.singleSelectOptions,l=Object(w.a)(e,["label","onError","maxSelectedOptions","defaultValue","singleSelectOptions"]),s=Object(o.useState)(r),c=s[0],u=s[1];Object(o.useEffect)((function(){l.onChange&&l.onChange(c),n&&n()}),[c]);return Object(x.b)("div",{className:"labelled-data-selector--wrapper"},Object(x.b)("label",null,Object(x.b)("b",null,t)),Object(x.b)(S.a,Object(y.a)({},l,{value:c,onChange:function(e){if(l.isMulti)if(e.length){var t=e.findIndex((function(e){return i.find((function(t){return t.value===e.value}))}));l.isMulti&&e.length>1&&-1!==t?u(0===t?e.slice(1):[e[t]]):a&&e.length>a?n&&n({type:"maxSelectedOptions",message:"Only up to "+a+" selections allowed"}):u(e)}else u(r);else u(e)},css:{marginRight:"10px"},styles:O,isClearable:"undefined"!==l.isClearable?l.isClearable:c.length>1})))};C.propTypes={label:m.a.string,options:m.a.array,maxSelectedOptions:m.a.number,onChange:m.a.func,onError:m.a.func,defaultValue:m.a.array,singleSelectOptions:m.a.array,isMulti:m.a.bool,isClearable:m.a.bool},C.defaultProps={maxSelectedOptions:2,singleSelectOptions:[]};var L=C,E=n(25);var V=function(e){return new Promise((function(t){Object(E.parse)(e,{download:!0,header:!0,skipEmptyLines:!0,complete:function(e){var n=e.data;return t(n)}})}))},j=function(e){var t,n=document.createElement("div");return(t=n.classList).add.apply(t,["spotlight-banner","data-selector--wrapper"]),e.parentElement.insertBefore(n,e),n},A=function(e,t,n){var a;return(a=e,Array.from(new Set(a.map((function(e){return e["Region name"]}))))).map((function(a){return{name:a,type:"bar",stack:"Region",tooltip:{trigger:"item",formatter:function(e){return e.seriesName+" <br> <strong>"+e.name+": "+e.value+"</strong> billion"}},data:t.map((function(t){var r=[];return e.filter((function(e){return e["poverty line (2017 PPP)"]===n})).forEach((function(e){e["Region name"]===a&&e.year===t&&r.push(Number(Number(e["Population in poverty (billions)"]).toFixed(2)))})),{value:r.reduce((function(e,t){return e+t}),0).toFixed(2),emphasis:{focus:"self"}}}))}}))},M=function(){window.DICharts.handler.addChart({className:"dicharts--economic-poverty-barchart",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){var t=new window.DICharts.Chart(e.parentElement),n=window.echarts.init(e),a=j(e);Object(s.createRoot)(a).render(l.a.createElement(h,{selectErrorMessage:""},l.a.createElement(L,{label:"Select poverty line",options:[{value:"2.15",label:"US$2.15 per day"},{value:"3.65",label:"US$3.65 per day"},{value:"6.85",label:"US$6.85 per day"}],classNamePrefix:"poverty-line-select",isClearable:!1,defaultValue:[{value:"2.15",label:"US$2.15 per day",isCloseable:!0}],onChange:function(e){window.DIState.setState({povertyLine:e.value})},css:{minWidth:"100px"}}))),V("https://raw.githubusercontent.com/devinit/economic-poverty-factsheet-viz/feature/charts-feedback/src/data/barChartData.csv").then((function(e){var a=function(e){return Array.from(new Set(e.map((function(e){return e.year}))))}(e);window.DIState&&window.DIState.addListener((function(){var r=window.DIState.getState.povertyLine,o={responsive:!1,grid:{top:"60",bottom:"20",left:"5%"},xAxis:{data:a},yAxis:{type:"value",name:"Number of people living in poverty (billions)",nameLocation:"middle",nameGap:35},series:A(e,a,r||"2.15")};p.color=c.bluebell,n.setOption(i()(p,o)),n.on("legendselectchanged",(function(e){!function(e,t){var n=t.selected,a=Object.values(n).filter((function(e){return e})).length;e.setOption({animation:!0}),0===a?Object.keys(n).forEach((function(t){e.dispatchAction({type:"legendSelect",name:t})})):n[t.name]||(e.dispatchAction({type:"legendSelect",name:t.name}),Object.keys(n).forEach((function(a){Object.prototype.hasOwnProperty.call(n,a)&&a!==t.name&&e.dispatchAction({type:"legendUnSelect",name:a})})))}(n,e)})),t.hideLoading()}))})),function(e,t){window.addEventListener("onresize",(function(){e.resize({width:t.clientWidth+"px",height:t.clientHeight+"px"})}),!0)}(n,e)}))}}})},P=n(16),R=n.n(P),N=(n(64),["#0c457b","#0089cc","#77adde","#bcd4f0"]),I=[{name:"ECA",label:"Europe & Central Asia"},{name:"MNA",label:"Middle East & North Africa"},{name:"SSA",label:"Sub-Saharan Africa"},{name:"OHI",label:"Other High Income Countries"},{name:"SAS",label:"South Asia"},{name:"LAC",label:"Latin America & Caribbean"},{name:"EAP",label:"East Asia & Pacific"}],D=[{variable:"progresspoorpop",label:"Change in number of people in poverty",unit:"million"},{variable:"progressHC",label:"Percentage of people living in poverty",unit:"%"}],k=["France","Kosovo","Norway"],T=function(e,t,n,a,r){for(var i=[],o=t;o<=n;o+=a)i.push(o);return r.scale(N).domain(i)(e)},z=function(e,t,n,a,r){var i=(r.positive.maxValue-r.positive.minValue)/N.length,o=(r.negative.maxValue-r.negative.minValue)/N.length;return e.properties[t]?"progresspoorpop"===t?Number(e.properties[t])/1e6>=0?n(Number(e.properties[t])/1e6,r.positive.minValue,r.positive.maxValue,i,a):n(Number(e.properties[t])/1e6,r.negative.minValue,r.negative.maxValue,o,a):Number(e.properties[t])/1e6>=0?n(100*Number(e.properties[t]),r.positive.minValue,r.positive.maxValue,i,a):n(100*Number(e.properties[t]),r.negative.minValue,r.negative.maxValue,o,a):"#E6E1E5"},F=function(e){return l.a.createElement("button",{className:"reset-button",onClick:e.onReset},"Reset")};F.propTypes={onReset:m.a.func};var _=F,U=function(e){return Object(x.b)(h,{selectErrorMessage:""},e.selectors.map((function(e){var t=e.label,n=e.options,a=e.defaultValue,r=e.stateProperty,i=e.classPrefix;return Object(x.b)(L,{key:t,label:t,options:n,classNamePrefix:i,isClearable:!1,defaultValue:[Object.assign({},a,{isCloseable:!0})],onChange:function(e){var t;window.DIState.setState(((t={})[r]=e.value,t))},css:{minWidth:"200px"}})})))};U.propTypes={selectors:m.a.arrayOf(m.a.shape({label:m.a.string.isRequired,defaultValue:m.a.shape({value:m.a.string,label:m.a.string}),stateProperty:m.a.string.isRequired,classPrefix:m.a.string.isRequired}))};var G=U,$=function(e,t,n,a,r,i){var o,l,s,c,u,p=(l=r,s=a.map((function(e){return Number(e[l])})),c=s.filter((function(e){return e>=0})),u=s.filter((function(e){return e<0})),"progresspoorpop"===l?{positive:{maxValue:Math.ceil(Math.max.apply(Math,c)/1e6),minValue:Math.ceil(Math.min.apply(Math,c)/1e6)},negative:{maxValue:Math.ceil(Math.max.apply(Math,u)/1e6),minValue:Math.ceil(Math.min.apply(Math,u)/1e6)-1}}:{positive:{maxValue:Math.ceil(100*Math.max.apply(Math,c)),minValue:Math.ceil(100*Math.min.apply(Math,c))},negative:{maxValue:Math.ceil(100*Math.max.apply(Math,u)),minValue:Math.ceil(100*Math.min.apply(Math,u))-1}}),d=i;d.onAdd=function(){var e=window.L.DomUtil.create("div","legend"),t=""+[{name:"solid"},{name:"pattern"}].map((function(e){var t=N.map((function(t){return'<span>\n          <i style="background:'+("solid"===e.name?t:"repeating-linear-gradient(\n            45deg,\n            white 0px,\n            white 2px,\n            "+t+" 2px,\n            "+t+" 4px\n          )")+';border-radius:1px;margin-right:0;width:40px;"></i>\n        </span>'})).join("");return'<div class="legendContentContainer"><p>'+("solid"===e.name?"Increasing poverty":"Decreasing poverty")+'</p><div style="display: flex;flex-direction: row;">'+t+'<p style="margin-left:1px;margin-top:4px;margin-right: 5px;">'+("solid"===e.name?p.positive.minValue:p.negative.minValue)+" - "+("solid"===e.name?p.positive.maxValue:p.negative.maxValue)+("progressHC"===r?", % of population":", millions of people")+"</p></div></div>"})).join("");return e.innerHTML=t,e},d.addTo(e);var f=function(t){var n;return(n={})[Number(t.properties[r])<0?"fillPattern":"fillColor"]=Number(t.properties[r])<0?new window.L.StripePattern({weight:2,spaceWeight:1,angle:45,color:z(t,r,T,R.a,p)}).addTo(e):z(t,r,T,R.a,p),n.weight=1,n.opacity=1,n.color="white",n.fillOpacity=1,n},b=function(e){o.resetStyle(e.target),e.target.closePopup()},m=function(t,n){t.properties[r]||""===t.properties[r]?n.on({mouseover:function(e){return function(e,t,n){var a=e.target;a.setStyle({fillColor:"#f7a838",color:"#484848",weight:2,fillPattern:null}),window.L.Browser.ie||window.L.Browser.opera||window.L.Browser.edge||a.bringToFront(),a.bindTooltip("<div>"+a.feature.properties.country_name+"<br>"+n.find((function(e){return e.variable===t})).label+": "+("progresspoorpop"===t?(Number(a.feature.properties[t])/1e6).toFixed(2):(100*Number(a.feature.properties[t])).toFixed(2))+'<span style="padding-left: 2px;">'+n.find((function(e){return e.variable===t})).unit+"</span></div>",{direction:"bottom",opacity:1,sticky:!0}).openTooltip()}(e,r,D)},mouseout:b}):n.on({mouseover:function(){e.getContainer().querySelectorAll(".leaflet-interactive").forEach((function(e){e.classList+=" grab-cursor-enabled"}))},mouseout:function(){e.getContainer().querySelectorAll(".leaflet-interactive.grab-cursor-enabled").forEach((function(e){e.classList.remove("grab-cursor-enabled")}))}})};n.clearLayers(),o=window.L.geoJSON(t,{style:f,onEachFeature:m}),n.addLayer(o)};var H=function(){window.DICharts.handler.addChart({className:"dicharts--economic-poverty-leaflet",echarts:{onAdd:function(e){Array.prototype.forEach.call(e,(function(e){window.dataLayer=window.dataLayer||[];var t=new window.DICharts.Chart(e.parentElement),n=window.L.map(e,{maxZoom:3,minZoom:1,crs:window.L.CRS.EPSG4326,center:[6.6,20.9],zoom:1,attributionControl:!1}),a=window.L.control({position:"bottomright"}),r=window.L.control({position:"bottomleft"});window.fetch("https://raw.githubusercontent.com/devinit/economic-poverty-factsheet-viz/feature/charts-feedback/src/data/world_map.geo.json").then((function(e){return e.json()})).then((function(i){var o=window.L.featureGroup().addTo(n),c=i.features;V("https://raw.githubusercontent.com/devinit/economic-poverty-factsheet-viz/feature/charts-feedback/src/data/map_data.csv").then((function(i){var u=function(e){return Array.from(new Set(e.map((function(e){return e.PIP_Region}))))}(i),p=[{label:"Select poverty data type",options:[{value:"progresspoorpop",label:"Change in number of people in poverty"},{value:"progressHC",label:"Percentage of people living in poverty"}],classPrefix:"poverty-data-select",stateProperty:"povertyData",defaultValue:{value:"progresspoorpop",label:"Change in number of people in poverty"}},{label:"Select region",options:[{value:"all",label:"All"}].concat(u.map((function(e){return{value:e,label:I.find((function(t){return t.name===e})).label}}))),classPrefix:"region-select",stateProperty:"povertyRegion",defaultValue:{value:"all",label:"All"}},{label:"Select poverty line",options:[{value:"2.15",label:"US$2.15 per day"},{value:"3.65",label:"US$3.65 per day"},{value:"6.85",label:"US$6.85 per day"}],classPrefix:"poverty-line-select",stateProperty:"mapPovertyLine",defaultValue:{value:"2.15",label:"US$2.15 per day"}}],d=j(e);Object(s.createRoot)(d).render(l.a.createElement(G,{selectors:p}));var f=function(){n.setView([6.6,20.9],1)};if(r.onAdd=function(){var e=window.L.DomUtil.create("div");return Object(s.createRoot)(e).render(l.a.createElement(_,{onReset:f})),e},r.addTo(n),window.DIState){t.showLoading();var b="all",m="progresspoorpop",g="2.15";window.DIState.addListener((function(){var e=window.DIState.getState,t=e.povertyRegion,r=e.povertyData,l=e.mapPovertyLine;if(b!==t||m!==r||g!==l){m=r||"progresspoorpop";var s=function(e,t,n){return"all"===n?e.filter((function(e){return e.poverty_line===t})):e.filter((function(e){return e.poverty_line===t&&e.PIP_Region===n}))}(i,g=l||"2.15",b=t||"all");$(n,function(e,t){return e.map((function(e){var n=Object.assign({},e),a=t.find((function(t){return k.includes(t.country_name)?t.ISO_A3===e.properties.WB_A3:t.ISO_A3===e.properties.ISO_A3}));return a&&(n.properties=Object.assign({},e.properties,a)),n}))}(c,s),o,s,m,a)}}))}t.hideLoading()}))})).catch((function(e){return console.log(e)}))}))}}})},q=n(26),B=n(7),W=function(){function e(){this.id=Math.random(),this.state={},this.listeners=[],Object(B.d)(this,{state:B.e,setState:B.a,getState:B.c})}var t=e.prototype;return t.setState=function(e,t){void 0===t&&(t=!0),this.state=t?Object.assign({},this.state,e):e},t.addListener=function(e){return this.listeners=this.listeners.concat(Object(B.b)(e)),this.listeners.length-1},t.removeListener=function(e){e<this.listeners.length&&this.listeners[e]&&(this.listeners[e](),this.listeners[e]=null)},t.resetListeners=function(){this.listeners=[]},Object(q.a)(e,[{key:"getState",get:function(){return this.state}}]),e}();window.DIState=new W;n(65);window.addEventListener("load",(function(){H(),M()}))}},[[29,1,2]]]);